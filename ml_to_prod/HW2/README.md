# RabbitMQ Microservices Project

## 1. Описание проекта
Этот проект реализует систему микросервисов, взаимодействующих через RabbitMQ. Каждый сервис выполняет определённую задачу, и все вместе они работают для обработки данных, прогнозирования и визуализации метрик.

### Структура проекта
- **`features/`**: Генерация данных (признаков и меток) и их отправка в очередь RabbitMQ.
  - `src/features.py`: Код сервиса генерации данных.
  - `Dockerfile`: Конфигурация для контейнера.
  - `requirements.txt`: Зависимости.

- **`model/`**: Получение данных из очереди, выполнение прогнозов с использованием обученной модели.
  - `src/model.py`: Код сервиса предсказания.
  - `src/myfile.pkl`: Сериализованная модель.
  - `Dockerfile`: Конфигурация для контейнера.
  - `requirements.txt`: Зависимости.

- **`metric/`**: Сохранение прогнозов и расчёт абсолютных ошибок. Логи записываются в файл `logs/metric_log.csv`.
  - `src/metric.py`: Код сервиса метрик.
  - `Dockerfile`: Конфигурация для контейнера.
  - `requirements.txt`: Зависимости.

- **`plot/`**: Построение гистограммы абсолютных ошибок. График сохраняется в `logs/error_distribution.png`.
  - `src/plot.py`: Код сервиса визуализации.
  - `Dockerfile`: Конфигурация для контейнера.
  - `requirements.txt`: Зависимости.

- **`docker-compose.yml`**: Конфигурация для управления всеми сервисами.
- **`logs/`**: Локальная директория для хранения логов и графиков.

---

## 2. Как запустить проект

### Шаг 1: Убедитесь, что у вас установлен Docker и Docker Compose
- Docker: [Установка Docker](https://docs.docker.com/get-docker/)
- Docker Compose: [Установка Docker Compose](https://docs.docker.com/compose/install/)

### Шаг 2: : Соберите и запустите проект
```bash
docker-compose up --build
```

## 3. Результаты работы

### Что вы увидите:
1. **Сервис `features`**:
   - Отправляет в RabbitMQ случайные данные (признаки и метки).
   - Логирует отправленные сообщения.

2. **Сервис `model`**:
   - Получает данные из очереди, делает прогнозы и отправляет их в очередь.

3. **Сервис `metric`**:
   - Сохраняет данные и метрики в файл `logs/metric_log.csv`.

4. **Сервис `plot`**:
   - Построит гистограмму абсолютных ошибок и сохранит её в `logs/error_distribution.png`.

### Проверка файлов:
- **`logs/metric_log.csv`**:
  Файл с метриками в формате CSV. Пример содержимого:
  ```csv
  id,y_true,y_pred,absolute_error
  1669147134.196809,295.0,221.77,73.23
  1669147136.824343,153.0,118.44,34.56
  1669147141.035324,189.0,204.06,15.06

- **`Файл с гистограммой распределения абсолютных ошибок`**.